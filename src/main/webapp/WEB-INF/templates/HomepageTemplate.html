<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title>TIW-DMS - Homepage</title>
    <link href="https://cdn.jsdelivr.net/npm/bulma@1.0.1/css/bulma.min.css" rel="stylesheet">
    <link crossorigin="anonymous" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
          integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
          referrerpolicy="no-referrer" rel="stylesheet"/>
    <style>
        .red-folder {
            color: red;
            text-decoration: line-through;
        }
    </style>
</head>

<body>

<!-- Hero: Used to archive vertical centering -->
<div class="hero is-fullheight">
    <div class="hero-body">
        <!-- Container: Used to archive horizontal centering -->
        <div class="container is-fluid">
            <!-- Columns: Used to divide the horizontal width in even parts -->
            <div class="columns">
                <!-- Column: Used to set the width of the child inside -->
                <div class="column is-6 is-offset-2">
                    <!-- Box: Used to archive shadowing, padding, ... -->
                    <div class="box">
                        <!-- Section: Used to divide the box content-->
                        <section class="section">
                            <!-- Now the page content is formatted as usual -->
                            <h1 class="title">Homepage üè†</h1>
                            <div class="content">
                                <p th:if="${message}" th:text="${message}">Hi, welcome to the DMS!</p>
                            </div>

                            <div class="content">
                                <h1 class="title is-4">Directory Structure üóÇÔ∏è</h1>
                                <ul th:insert="~{::subtree(fragment='subtree')}"
                                    th:with="nodes=${foldersTree.getNodeChildren},
                                     originalFolderID=${originalFolderID}"></ul>
                                <!-- Recursive fragment for rendering subtrees -->
                                <div th:fragment="subtree">
                                    <li th:each="node : ${nodes}">
                                        <span class="red-folder"
                                              th:if="${node.getNodeData.getFolderID} == ${originalFolderID}"
                                              th:text="${node.getNodeData.getFolderName}"></span>
                                        <a th:href="@{${folderURL}(folderID=${node.getNodeData.getFolderID})}"
                                           th:text="${node.getNodeData.getFolderName}"
                                           th:unless="${node.getNodeData.getFolderID} == ${originalFolderID}"></a>
                                        <!-- Check if the current node has children -->
                                        <ul th:if="${node.getNodeChildren.size() > 0}"
                                            th:insert="~{::subtree(fragment='subtree')}"
                                            th:with="nodes=${node.getNodeChildren},
                                            originalFolderID=${originalFolderID}"></ul>
                                    </li>
                                </div>
                            </div>

                        </section>
                    </div>
                </div>
                <div class="column is-3">
                    <div class="box">
                        <aside class="menu">
                            <p class="menu-label">Actions ‚öôÔ∏è</p>
                            <ul class="menu-list">
                                <li><a href="create">‚ûï Create New Folder/Document</a></li>
                                <li><a href="logout">üö™ Logout</a></li>
                            </ul>
                        </aside>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>